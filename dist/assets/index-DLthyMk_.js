(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))e(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&e(f)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();const y={gb:{name:"United Kingdom",currency:"GBP",locale:"en-GB",terms:{incomeLabel:"Annual Income",expensesLabel:"Business Expenses",taxName:"Income Tax",insuranceName:"National Insurance",takeHomeLabel:"Take-Home Pay",netLabel:"Monthly Salary (PAYE)"},taxRules:{personalAllowance:12570,brackets:[{limit:50270,rate:.2,name:"Basic Rate"},{limit:125140,rate:.4,name:"Higher Rate"},{limit:1/0,rate:.45,name:"Additional Rate"}],niThreshold:12570,niUpperThreshold:50270,niLowerRate:.06,niUpperRate:.02}},us:{name:"United States",currency:"USD",locale:"en-US",terms:{incomeLabel:"Gross Annual Income",expensesLabel:"Business Deductions",taxName:"Federal Income Tax",insuranceName:"FICA (Self-Employment)",takeHomeLabel:"Estimated Paycheck",netLabel:"Monthly Paycheck"},taxRules:{standardDeduction:15e3,brackets:[{limit:11925,rate:.1},{limit:48475,rate:.12},{limit:103350,rate:.22},{limit:197300,rate:.24},{limit:250525,rate:.32},{limit:626350,rate:.35},{limit:1/0,rate:.37}],ficaRate:.153,ficaTaxableBase:.9235}},au:{name:"Australia",currency:"AUD",locale:"en-AU",terms:{incomeLabel:"Annual Income",expensesLabel:"Work Related Deductions",taxName:"Income Tax",insuranceName:"Medicare Levy",takeHomeLabel:"Take-Home Pay",netLabel:"Fortnightly Pay"},taxRules:{thresholds:[{limit:18200,rate:0},{limit:45e3,rate:.16},{limit:135e3,rate:.3},{limit:19e4,rate:.37},{limit:1/0,rate:.45}],medicareRate:.02}},ca:{name:"Canada (Ontario)",currency:"CAD",locale:"en-CA",terms:{incomeLabel:"Annual Income",expensesLabel:"Business Expenses",taxName:"Federal & Provincial Tax",insuranceName:"CPP Contributions",takeHomeLabel:"Take-Home Pay",netLabel:"Monthly Salary"},taxRules:{fedBrackets:[{limit:57375,rate:.145},{limit:114750,rate:.205},{limit:177882,rate:.26},{limit:253414,rate:.29},{limit:1/0,rate:.33}],provBrackets:[{limit:52886,rate:.0505},{limit:105775,rate:.0915},{limit:15e4,rate:.1116},{limit:22e4,rate:.1216},{limit:1/0,rate:.1316}],cppRate:.119,cppLimit:67800}}};let u="gb";function d(x,c=u){const t=y[c];return new Intl.NumberFormat(t.locale,{style:"currency",currency:t.currency}).format(x)}function b(){const x=parseFloat(document.getElementById("income").value)||0,c=parseFloat(document.getElementById("expenses").value)||0,t=Math.max(0,x-c),e=y[u];let n=0,a=0,f=[];if(u==="gb"){const m=e.taxRules.personalAllowance;if(t>m){let s=t-m,o=m;for(const r of e.taxRules.brackets){const i=Math.min(s,r.limit-o);if(i>0){const l=i*r.rate;n+=l,f.push(`${r.name}: ${d(l)}`),s-=i,o=r.limit}}}if(t>e.taxRules.niThreshold){const s=Math.min(t,e.taxRules.niUpperThreshold)-e.taxRules.niThreshold;a+=s*e.taxRules.niLowerRate,t>e.taxRules.niUpperThreshold&&(a+=(t-e.taxRules.niUpperThreshold)*e.taxRules.niUpperRate)}}else if(u==="us"){a=t*e.taxRules.ficaTaxableBase*e.taxRules.ficaRate;let o=Math.max(0,t-a/2-e.taxRules.standardDeduction),r=0;for(const i of e.taxRules.brackets){const l=i.limit-r,h=Math.min(o,l);h>0&&(n+=h*i.rate,o-=h,r=i.limit)}}else if(u==="au"){let m=t,s=0;for(const o of e.taxRules.thresholds){const r=o.limit-s,i=Math.min(m,r);i>0&&(n+=i*o.rate,m-=i,s=o.limit)}a=t*e.taxRules.medicareRate}else if(u==="ca"){a=Math.min(t,e.taxRules.cppLimit)*e.taxRules.cppRate;let m=t,s=0;for(const i of e.taxRules.fedBrackets){const l=Math.min(m,i.limit-s);l>0&&(n+=l*i.rate,m-=l,s=i.limit)}let o=t,r=0;for(const i of e.taxRules.provBrackets){const l=Math.min(o,i.limit-r);l>0&&(n+=l*i.rate,o-=l,r=i.limit)}}const g=n+a,L=t-g,R=u==="au"?26:12;document.getElementById("taxableProfit").textContent=d(t),document.getElementById("incomeTax").textContent=d(n),document.getElementById("nationalInsurance").textContent=d(a),document.getElementById("totalTax").textContent=d(g),document.getElementById("takeHome").textContent=d(L),document.getElementById("periodicPay").textContent=d(L/R);const p=e.terms;document.querySelector('label[for="income"]').textContent=p.incomeLabel+` (${e.currency})`,document.querySelector('label[for="expenses"]').textContent=p.expensesLabel+` (${e.currency})`,document.getElementById("taxNameLabel").textContent=p.taxName,document.getElementById("insuranceNameLabel").textContent=p.insuranceName,document.getElementById("periodicLabel").textContent=p.netLabel}function I(){const x=document.getElementById("countrySelector");Object.keys(y).forEach(c=>{const t=document.createElement("button");t.className=`px-4 py-2 rounded-lg transition-all ${c===u?"bg-primary-500 text-white":"bg-white/5 hover:bg-white/10"}`,t.textContent=y[c].name,t.onclick=()=>{u=c,document.querySelectorAll("#countrySelector button").forEach(e=>e.classList.remove("bg-primary-500","text-white")),document.querySelectorAll("#countrySelector button").forEach(e=>e.classList.add("bg-white/5")),t.classList.add("bg-primary-500","text-white"),t.classList.remove("bg-white/5"),b()},x.appendChild(t)}),document.getElementById("income").oninput=b,document.getElementById("expenses").oninput=b,b()}document.addEventListener("DOMContentLoaded",I);
